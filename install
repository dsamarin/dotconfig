#!/bin/bash

files=(.gitconfig .zshrc .ssh/config .ssh/authorized_keys .tmux.conf)
files_len=${#files[*]}

# For each file in the file list
for ((i=0; i<files_len; i++)); do

	# If file already exists
	if [[ -h "$HOME/${files[i]}" || -e "$HOME/${files[i]}" ]]; then

		# Prompt to delete it
		while true; do
			read -p "Do you wish to remove $HOME/${files[i]}? "
			case $REPLY in
				[Yy]* ) rm -rf "$HOME/${files[i]}"; break;;
				[Nn]* ) continue 2;;
				* ) echo "Please answer yes or no.";;
			esac
		done
	fi

	# Create a symlink
	echo "ln -s $PWD/${files[i]} $HOME/${files[i]}"
	ln -s "$PWD/${files[i]}" "$HOME/${files[i]}"
done

DEBIAN_PACKAGES=git tmux zsh
PACMAN_PACKAGES=git tmux zsh

# Install required software
if [[ -e '/usr/bin/apt' ]]; then
	sudo apt update
	sudo apt install $DEBIAN_PACKAGES
fi
if [[ -e '/usr/bin/pacman' ]]; then
	sudo pacman --sync --needed $PACMAN_PACKAGES
fi

# Update shell
chsh -s /bin/zsh
